!function(t,e){var n,r;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=t.Base64,(r=e()).noConflict=function(){return t.Base64=n,r},t.Meteor&&(Base64=r),t.Base64=r)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(){"use strict";function n(t){return t.replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=+$/m,"")}function t(t){for(var e,n,r,o="",i=t.length%3,a=0;a<t.length;){if(255<(e=t.charCodeAt(a++))||255<(n=t.charCodeAt(a++))||255<(r=t.charCodeAt(a++)))throw new TypeError("invalid character found");o+=C[(e=e<<16|n<<8|r)>>18&63]+C[e>>12&63]+C[e>>6&63]+C[63&e]}return i?o.slice(0,i-3)+"===".substring(i):o}function e(t,e){return(e=void 0===e?!1:e)?n(S(t)):S(t)}function r(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?x(192|e>>>6)+x(128|63&e):x(224|e>>>12&15)+x(128|e>>>6&63)+x(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return x(240|e>>>18&7)+x(128|e>>>12&63)+x(128|e>>>6&63)+x(128|63&e)}function o(t){return t.replace(V,r)}function i(t,e){return(e=void 0===e?!1:e)?n(T(t)):T(t)}function a(t){return i(t,!0)}function c(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return x(55296+(e>>>10))+x(56320+(1023&e));case 3:return x((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return x((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}}function s(t){return t.replace(j,c)}function u(t){if(t=t.replace(/\s+/g,""),!U.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));for(var e,n,r,o="",i=0;i<t.length;)e=v[t.charAt(i++)]<<18|v[t.charAt(i++)]<<12|(n=v[t.charAt(i++)])<<6|(r=v[t.charAt(i++)]),o+=64===n?x(e>>16&255):64===r?x(e>>16&255,e>>8&255):x(e>>16&255,e>>8&255,255&e);return o}function h(t){return K(f(t))}function f(t){return k(t.replace(/[-_]/g,function(t){return"-"==t?"+":"/"}))}function p(t){return D(f(t))}function d(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}}function l(){function t(t,e){Object.defineProperty(String.prototype,t,d(e))}t("fromBase64",function(){return p(this)}),t("toBase64",function(t){return i(this,t)}),t("toBase64URI",function(){return i(this,!0)}),t("toBase64URL",function(){return i(this,!0)}),t("toUint8Array",function(){return h(this)})}function g(){function t(t,e){Object.defineProperty(Uint8Array.prototype,t,d(e))}t("toBase64",function(t){return e(this,t)}),t("toBase64URI",function(){return e(this,!0)}),t("toBase64URL",function(){return e(this,!0)})}var b,y="function"==typeof atob,m="function"==typeof btoa,A="function"==typeof Buffer,w="function"==typeof TextDecoder?new TextDecoder:void 0,B="function"==typeof TextEncoder?new TextEncoder:void 0,C=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),v=(b={},C.forEach(function(t,e){return b[t]=e}),b),U=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,x=String.fromCharCode.bind(String),$="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t,e){return void 0===e&&(e=function(t){return t}),new Uint8Array(Array.prototype.slice.call(t,0).map(e))},k=function(t){return t.replace(/[^A-Za-z0-9\+\/]/g,"")},F=m?function(t){return btoa(t)}:A?function(t){return Buffer.from(t,"binary").toString("base64")}:t,S=A?function(t){return Buffer.from(t).toString("base64")}:function(t){for(var e=[],n=0,r=t.length;n<r;n+=4096)e.push(x.apply(null,t.subarray(n,n+4096)));return F(e.join(""))},V=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,T=A?function(t){return Buffer.from(t,"utf8").toString("base64")}:B?function(t){return S(B.encode(t))}:function(t){return F(o(t))},j=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,E=y?function(t){return atob(k(t))}:A?function(t){return Buffer.from(t,"base64").toString("binary")}:u,K=A?function(t){return $(Buffer.from(t,"base64"))}:function(t){return $(E(t),function(t){return t.charCodeAt(0)})},D=A?function(t){return Buffer.from(t,"base64").toString("utf8")}:w?function(t){return w.decode(K(t))}:function(t){return s(E(t))},z={version:"3.7.1",VERSION:"3.7.1",atob:E,atobPolyfill:u,btoa:F,btoaPolyfill:t,fromBase64:p,toBase64:i,encode:i,encodeURI:a,encodeURL:a,utob:o,btou:s,decode:p,isValid:function(t){if("string"!=typeof t)return!1;t=t.replace(/\s+/g,"").replace(/=+$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:e,toUint8Array:h,extendString:l,extendUint8Array:g,extendBuiltins:function(){l(),g()},Base64:{}};return Object.keys(z).forEach(function(t){return z.Base64[t]=z[t]}),z});var ghKV=function(t){try{this.username=t.username,this.repo=t.repo,this.token=t.token,this.filename=t.filename,this.branch=t.branch}catch(t){}};ghKV.prototype.log=function(){console.log("Database loaded. Use `new ghKV()` to init.")},ghKV.prototype.get=async function(t){if(!this.token||!this.filename||!this.branch)return console.error("[Error] Please Check the Config. (token/filename/branch)"),!1;if(!t)return console.error("[Error] Please Check the key."),!1;var e=encodeURI(`https://api.github.com/repos/${this.username}/${this.repo}/commits?sha=${this.branch}&dt=`+Math.floor(1e8*Math.random()));let n=await fetch(e,{headers:{Accept:"application/vnd.github.v3.raw",Authorization:"token "+this.token,"User-Agent":"ghKV Clinet"}});e=await n.text(),e=JSON.parse(e)[0].sha,e=encodeURI(`https://raw.githubusercontent.com/${this.username}/${this.repo}/${e}${this.filename}?dt=`+Math.floor(1e8*Math.random()));let r=await fetch(e,{headers:{Accept:"application/vnd.github.v3.raw",Authorization:"token "+this.token}});e=await r.text(),e=JSON.parse(e);return 1==t?e:e[t]},ghKV.prototype.set=async function(t,e){let n=await fetch(`https://api.github.com/repos/${this.username}/${this.repo}/contents/${this.filename}?ref=`+this.branch,{method:"GET",headers:{"content-type":"application/json;charset=UTF-8","user-agent":"ghKV Client",Authorization:"token "+this.token}});var r=(await n.json()).sha,o=await this.get(!0),t=(o[t]=e,o=JSON.stringify(o),{body:JSON.stringify({branch:this.branch,message:"Upload Database by ghKV.",content:Base64.encode(o),sha:r}),method:"PUT",headers:{accept:"application/vnd.github.v3+json","content-type":"application/json;charset=UTF-8","user-agent":"ghKV Client",Authorization:"token "+this.token}}),e=await fetch(`https://api.github.com/repos/${this.username}/${this.repo}/contents${this.filename}?ref=`+this.branch,t);return 200==e.status||201==e.status},ghKV.prototype.delete=async function(t){let e=await fetch(`https://api.github.com/repos/${this.username}/${this.repo}/contents/${this.filename}?ref=`+this.branch,{method:"GET",headers:{"content-type":"application/json;charset=UTF-8","user-agent":"ghKV Client",Authorization:"token "+this.token}});var n=(await e.json()).sha,r=await this.get(!0),t=(delete r[t],r=JSON.stringify(r),{body:JSON.stringify({branch:this.branch,message:"Upload Database by ghKV.",content:Base64.encode(r),sha:n}),method:"PUT",headers:{accept:"application/vnd.github.v3+json","content-type":"application/json;charset=UTF-8","user-agent":"ghKV Client",Authorization:"token "+this.token}}),r=await fetch(`https://api.github.com/repos/${this.username}/${this.repo}/contents${this.filename}?ref=`+this.branch,t);return 200==r.status||201==r.status};